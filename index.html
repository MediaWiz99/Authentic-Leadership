<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Authentic Leadership Assessment | Chapman University</title>
    <style>
        :root {
            --chapman-blue: #00205B;
            --chapman-gold: #C4A000;
            --gold-light: #F5E6A3;
            --blue-light: #E8EDF5;
            --blue-medium: #1A3A7A;
            --text-primary: #1a1a2e;
            --text-secondary: #4a4a5a;
            --white: #ffffff;
            --self-awareness: #1565C0;
            --transparency: #2E7D32;
            --ethics: #7B1FA2;
            --balanced: #C62828;
            --shadow-subtle: 0 2px 8px rgba(0, 32, 91, 0.08);
            --shadow-medium: 0 4px 20px rgba(0, 32, 91, 0.12);
            --shadow-strong: 0 8px 32px rgba(0, 32, 91, 0.18);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', 'Roboto', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.7;
            color: var(--text-primary);
            background: linear-gradient(135deg, var(--chapman-blue) 0%, var(--blue-medium) 50%, var(--chapman-blue) 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 950px;
            margin: 0 auto;
            background: var(--white);
            border-radius: 16px;
            box-shadow: var(--shadow-strong);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, var(--chapman-blue) 0%, var(--blue-medium) 100%);
            color: var(--white);
            padding: 40px 30px;
            text-align: center;
            position: relative;
        }
        .header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--chapman-gold) 0%, var(--gold-light) 50%, var(--chapman-gold) 100%);
        }
        .institution { font-size: 0.95em; letter-spacing: 2px; text-transform: uppercase; opacity: 0.9; margin-bottom: 5px; }
        .college { font-size: 1.1em; color: var(--chapman-gold); margin-bottom: 20px; font-weight: 600; }
        h1 { font-size: 2.4em; font-weight: 700; margin-bottom: 12px; }
        .subtitle { font-size: 1.15em; font-style: italic; color: var(--gold-light); }
        .content { padding: 35px; }
        .hidden { display: none !important; }

        .intro-section {
            background: linear-gradient(135deg, var(--blue-light) 0%, #f8f9fc 100%);
            border-radius: 14px;
            padding: 30px;
            margin-bottom: 30px;
            border-left: 5px solid var(--chapman-blue);
        }
        .intro-section h2 { color: var(--chapman-blue); font-size: 1.4em; margin-bottom: 15px; }
        .intro-section p { color: var(--text-secondary); margin-bottom: 15px; }

        .dimensions-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin: 25px 0;
        }
        .dim-preview {
            padding: 20px 12px;
            border-radius: 12px;
            text-align: center;
            color: var(--white);
        }
        .dim-preview.self-awareness { background: linear-gradient(135deg, var(--self-awareness), #1976D2); }
        .dim-preview.transparency { background: linear-gradient(135deg, var(--transparency), #43A047); }
        .dim-preview.ethics { background: linear-gradient(135deg, var(--ethics), #9C27B0); }
        .dim-preview.balanced { background: linear-gradient(135deg, var(--balanced), #D32F2F); }
        .dim-preview .icon { font-size: 1.8em; margin-bottom: 6px; }
        .dim-preview .name { font-weight: 700; font-size: 0.75em; line-height: 1.3; }

        .quote-box {
            background: linear-gradient(135deg, #fffef8, #fef9e7);
            border-left: 5px solid var(--chapman-gold);
            padding: 25px;
            margin: 25px 0;
            border-radius: 0 12px 12px 0;
        }
        .quote-box blockquote { font-style: italic; color: var(--text-secondary); font-size: 1.05em; line-height: 1.6; }
        .quote-box cite { display: block; margin-top: 12px; color: var(--chapman-blue); font-weight: 600; font-style: normal; }

        .assessment-meta {
            display: flex; gap: 25px; margin-top: 20px; padding-top: 20px;
            border-top: 1px solid rgba(0, 32, 91, 0.1); flex-wrap: wrap;
        }
        .meta-item { display: flex; align-items: center; gap: 8px; color: var(--text-secondary); }
        .meta-icon {
            width: 28px; height: 28px; background: var(--chapman-blue); color: var(--white);
            border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 0.85em;
        }

        .student-info { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-bottom: 30px; }
        .input-group { display: flex; flex-direction: column; }
        .input-group label { font-weight: 600; margin-bottom: 8px; color: var(--chapman-blue); }
        .input-group input {
            padding: 14px 16px; border: 2px solid #e1e5eb; border-radius: 10px;
            font-size: 16px; transition: all 0.3s ease;
        }
        .input-group input:focus { outline: none; border-color: var(--chapman-blue); box-shadow: 0 0 0 4px rgba(0, 32, 91, 0.08); }

        .instructions-box {
            background: linear-gradient(135deg, #fffef8 0%, #fef9e7 100%);
            border: 2px solid var(--chapman-gold); border-radius: 12px; padding: 25px; margin-bottom: 30px;
        }
        .instructions-box h3 { color: var(--chapman-blue); margin-bottom: 15px; }
        .instructions-box p { color: var(--text-secondary); margin-bottom: 10px; }
        .scale-display {
            display: flex; justify-content: space-between; margin-top: 15px;
            padding: 15px; background: var(--blue-light); border-radius: 10px;
        }
        .scale-item { text-align: center; flex: 1; }
        .scale-number {
            display: inline-block; width: 36px; height: 36px; line-height: 36px;
            background: var(--chapman-blue); color: var(--white); border-radius: 50%; font-weight: 700; margin-bottom: 5px;
        }
        .scale-label { font-size: 0.6em; color: var(--text-secondary); }

        .progress-container { margin-bottom: 25px; }
        .progress-label { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 0.9em; color: var(--text-secondary); }
        .progress-bar { width: 100%; height: 10px; background: #e8ecf0; border-radius: 5px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--chapman-blue) 0%, var(--chapman-gold) 100%); width: 0%; transition: width 0.5s ease; }

        .question-container {
            background: var(--white); border-radius: 14px; border: 2px solid #e8ecf0;
            padding: 25px; margin-bottom: 18px; transition: all 0.3s ease;
        }
        .question-container:hover { border-color: var(--chapman-blue); box-shadow: var(--shadow-medium); }
        .question-container.answered { border-color: var(--chapman-gold); background: linear-gradient(135deg, #fffef8 0%, var(--white) 100%); }
        .question-text { font-size: 1.02em; color: var(--text-primary); margin-bottom: 18px; line-height: 1.6; }
        .question-number { color: var(--chapman-blue); font-weight: 700; margin-right: 8px; }

        .likert-scale { display: flex; justify-content: space-between; gap: 6px; }
        .likert-option { flex: 1; text-align: center; }
        .likert-option input[type="radio"] { display: none; }
        .likert-option label {
            display: flex; flex-direction: column; align-items: center; padding: 12px 6px;
            border: 2px solid #e8ecf0; border-radius: 10px; cursor: pointer; transition: all 0.3s ease; background: #fafbfc;
        }
        .likert-option label:hover { border-color: var(--chapman-blue); background: var(--blue-light); }
        .likert-option input[type="radio"]:checked + label { border-color: var(--chapman-blue); background: var(--chapman-blue); color: var(--white); }
        .likert-number { font-size: 1.2em; font-weight: 700; margin-bottom: 2px; }
        .likert-label { font-size: 0.55em; text-transform: uppercase; letter-spacing: 0.3px; }

        .controls { text-align: center; margin: 30px 0; }
        .btn {
            border: none; padding: 16px 40px; font-size: 1.05em; font-weight: 600;
            border-radius: 12px; cursor: pointer; transition: all 0.3s ease; margin: 8px;
            display: inline-flex; align-items: center; gap: 10px;
        }
        .btn-primary { background: linear-gradient(135deg, var(--chapman-blue) 0%, var(--blue-medium) 100%); color: var(--white); box-shadow: 0 4px 15px rgba(0, 32, 91, 0.3); }
        .btn-primary:hover:not(:disabled) { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(0, 32, 91, 0.4); }
        .btn-secondary { background: linear-gradient(135deg, var(--chapman-gold) 0%, #d4b000 100%); color: var(--chapman-blue); }
        .btn-secondary:hover { transform: translateY(-3px); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none !important; }
        .btn-outline { background: transparent; border: 2px solid var(--chapman-blue); color: var(--chapman-blue); }

        .results { display: none; margin-top: 30px; }
        .results-header {
            background: linear-gradient(135deg, var(--chapman-blue) 0%, var(--blue-medium) 100%);
            color: var(--white); padding: 40px; text-align: center; border-radius: 16px 16px 0 0;
        }
        .results-header h2 { font-size: 1.8em; margin-bottom: 10px; }
        .results-header .student-name { font-size: 1.3em; color: var(--chapman-gold); margin-bottom: 8px; }
        .results-header .date { opacity: 0.9; }

        .overall-score { background: linear-gradient(135deg, #34495e, #2c3e50); padding: 40px; text-align: center; }
        .score-circle {
            width: 160px; height: 160px; border-radius: 50%;
            background: conic-gradient(var(--chapman-gold) var(--pct), rgba(255,255,255,0.2) 0);
            display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;
        }
        .score-inner {
            width: 130px; height: 130px; border-radius: 50%; background: #2c3e50;
            display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--white);
        }
        .score-inner .score { font-size: 2.8em; font-weight: 700; line-height: 1; }
        .score-inner .label { font-size: 0.85em; opacity: 0.9; }
        .level-name { color: var(--chapman-gold); font-size: 1.4em; font-weight: 700; margin-bottom: 10px; }
        .level-desc { color: rgba(255,255,255,0.85); font-size: 0.95em; max-width: 600px; margin: 0 auto; line-height: 1.6; }

        .dim-scores {
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; padding: 25px;
            background: linear-gradient(135deg, #3a5068, #2c3e50);
        }
        .dim-score-card {
            background: rgba(255,255,255,0.1); padding: 20px 15px; border-radius: 14px;
            text-align: center; color: var(--white); position: relative;
        }
        .dim-score-card.highest { box-shadow: 0 0 0 3px var(--chapman-gold); }
        .dim-score-card.lowest { border: 2px dashed rgba(255,255,255,0.4); }
        .dim-score-card .icon { font-size: 1.6em; margin-bottom: 6px; }
        .dim-score-card .name { font-size: 0.7em; margin-bottom: 8px; opacity: 0.9; }
        .dim-score-card .score { font-size: 2em; font-weight: 700; }
        .dim-score-card .max { font-size: 0.7em; opacity: 0.7; }

        .results-body { background: var(--blue-light); padding: 35px; border-radius: 0 0 16px 16px; }

        .result-section {
            background: var(--white); border-radius: 14px; padding: 28px; margin-bottom: 20px;
            border-left: 5px solid var(--chapman-blue); box-shadow: var(--shadow-subtle);
        }
        .result-section.gold-accent { border-left-color: var(--chapman-gold); }
        .result-section h4 { color: var(--chapman-blue); margin-bottom: 18px; }

        .dim-detail {
            padding: 20px; border-radius: 12px; margin-bottom: 15px;
        }
        .dim-detail.self-awareness { background: rgba(21, 101, 192, 0.08); border-left: 4px solid var(--self-awareness); }
        .dim-detail.transparency { background: rgba(46, 125, 50, 0.08); border-left: 4px solid var(--transparency); }
        .dim-detail.ethics { background: rgba(123, 31, 162, 0.08); border-left: 4px solid var(--ethics); }
        .dim-detail.balanced { background: rgba(198, 40, 40, 0.08); border-left: 4px solid var(--balanced); }
        .dim-detail h5 { margin-bottom: 8px; display: flex; align-items: center; gap: 10px; }
        .dim-detail p { font-size: 0.9em; color: var(--text-secondary); margin-bottom: 10px; }
        .dim-detail ul { list-style: none; padding: 0; margin: 0; }
        .dim-detail li { padding: 5px 0 5px 20px; position: relative; font-size: 0.85em; color: var(--text-secondary); }
        .dim-detail li::before { content: '‚Üí'; position: absolute; left: 0; }

        .reflection-section {
            background: linear-gradient(135deg, var(--blue-light) 0%, #f0f4fa 100%);
            border-radius: 14px; padding: 30px; margin-top: 25px; border: 2px solid var(--chapman-blue);
        }
        .reflection-section h4 { color: var(--chapman-blue); margin-bottom: 20px; text-align: center; }
        .reflection-questions { counter-reset: reflection; }
        .reflection-question {
            padding: 18px 20px 18px 50px; position: relative; background: var(--white);
            border-radius: 10px; margin-bottom: 12px; color: var(--text-secondary);
        }
        .reflection-question::before {
            counter-increment: reflection; content: counter(reflection);
            position: absolute; left: 15px; top: 50%; transform: translateY(-50%);
            width: 26px; height: 26px; background: var(--chapman-blue); color: var(--white);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 0.85em; font-weight: 700;
        }

        .footer { text-align: center; padding: 25px; color: var(--text-secondary); font-size: 0.9em; border-top: 1px solid #e8ecf0; margin-top: 30px; }

        @media (max-width: 768px) {
            .dimensions-grid, .dim-scores { grid-template-columns: repeat(2, 1fr); }
            .student-info { grid-template-columns: 1fr; }
            h1 { font-size: 1.8em; }
            .likert-scale { flex-wrap: wrap; }
            .likert-option { min-width: 55px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="institution">Chapman University</div>
            <div class="college">Argyros College of Business and Economics</div>
            <h1>Authentic Leadership Assessment</h1>
            <div class="subtitle">Based on Walumbwa et al.'s Authentic Leadership Model</div>
        </div>

        <div class="content">
            <div id="intro-section">
                <div class="intro-section">
                    <h2>üéØ How Authentic Is Your Leadership?</h2>
                    <p><strong>Authentic leadership</strong> is about being genuine, leading with purpose, and staying true to your values. Research shows that authentic leaders build greater trust, engagement, and performance in their teams.</p>
                    <p>This assessment measures four core dimensions of authentic leadership identified by <strong>Walumbwa, Avolio, Gardner, and colleagues</strong>:</p>

                    <div class="dimensions-grid">
                        <div class="dim-preview self-awareness">
                            <div class="icon">ü™û</div>
                            <div class="name">Self-Awareness</div>
                        </div>
                        <div class="dim-preview transparency">
                            <div class="icon">üíé</div>
                            <div class="name">Relational Transparency</div>
                        </div>
                        <div class="dim-preview ethics">
                            <div class="icon">‚öñÔ∏è</div>
                            <div class="name">Internalized Moral Perspective</div>
                        </div>
                        <div class="dim-preview balanced">
                            <div class="icon">üéØ</div>
                            <div class="name">Balanced Processing</div>
                        </div>
                    </div>

                    <div class="quote-box">
                        <blockquote>"Authentic leaders are deeply aware of how they think and behave and are perceived by others as being aware of their own and others' values, knowledge, and strengths; aware of the context in which they operate; and who are confident, hopeful, optimistic, resilient, and of high moral character."</blockquote>
                        <cite>‚Äî Avolio & Gardner, Authentic Leadership Development (2005)</cite>
                    </div>

                    <div class="assessment-meta">
                        <div class="meta-item"><div class="meta-icon">‚è±</div><span>8-10 minutes</span></div>
                        <div class="meta-item"><div class="meta-icon">üìù</div><span>16 self-assessment items</span></div>
                        <div class="meta-item"><div class="meta-icon">üéØ</div><span>4 leadership dimensions</span></div>
                    </div>
                </div>

                <div class="student-info">
                    <div class="input-group">
                        <label for="studentName">Your Full Name</label>
                        <input type="text" id="studentName" placeholder="Enter your full name">
                    </div>
                    <div class="input-group">
                        <label for="testDate">Assessment Date</label>
                        <input type="date" id="testDate">
                    </div>
                </div>

                <div class="instructions-box">
                    <h3>üìå How to Complete This Assessment</h3>
                    <p>Think about your leadership behaviors and tendencies. Rate how frequently each statement describes your typical approach.</p>
                    <div class="scale-display">
                        <div class="scale-item"><div class="scale-number">1</div><div class="scale-label">Not At All</div></div>
                        <div class="scale-item"><div class="scale-number">2</div><div class="scale-label">Rarely</div></div>
                        <div class="scale-item"><div class="scale-number">3</div><div class="scale-label">Sometimes</div></div>
                        <div class="scale-item"><div class="scale-number">4</div><div class="scale-label">Often</div></div>
                        <div class="scale-item"><div class="scale-number">5</div><div class="scale-label">Always</div></div>
                    </div>
                </div>

                <div class="controls">
                    <button class="btn btn-primary" onclick="startAssessment()">Begin Assessment ‚Üí</button>
                </div>
            </div>

            <div id="assessment-section" class="hidden">
                <div class="progress-container">
                    <div class="progress-label">
                        <span>Assessment Progress</span>
                        <span id="progressText">0 of 16 questions completed</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>
                <div id="questions-container"></div>
                <div class="controls">
                    <button class="btn btn-primary" id="submitBtn" onclick="calculateResults()" disabled>Discover My Authentic Leadership Profile ‚Üí</button>
                </div>
            </div>

            <div id="results" class="results"></div>

            <div id="downloadSection" class="hidden controls">
                <button class="btn btn-secondary" onclick="generatePDF()">üìÑ Download PDF Report</button>
                <button class="btn btn-outline" onclick="restartAssessment()">Take Assessment Again</button>
            </div>
        </div>

        <div class="footer">
            <p>Authentic Leadership Assessment ‚Ä¢ Based on Walumbwa et al.'s ALQ Model (2008)</p>
            <p>Chapman University ‚Ä¢ Argyros College of Business and Economics</p>
            <p style="margin-top: 8px; font-size: 0.85em;">¬© 2024 Professor Chip Monaco ‚Ä¢ MGMT 316</p>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        const questions = {
            selfAwareness: [
                { id: 1, text: "I seek feedback to understand my strengths and weaknesses.", dim: "selfAwareness" },
                { id: 2, text: "I accurately describe how others view my capabilities.", dim: "selfAwareness" },
                { id: 3, text: "I show I understand my impact on others.", dim: "selfAwareness" },
                { id: 4, text: "I know when to re-examine my positions on important issues.", dim: "selfAwareness" }
            ],
            transparency: [
                { id: 5, text: "I say exactly what I mean.", dim: "transparency" },
                { id: 6, text: "I admit my mistakes to others.", dim: "transparency" },
                { id: 7, text: "I openly share information with others.", dim: "transparency" },
                { id: 8, text: "I express my ideas and thoughts clearly to others.", dim: "transparency" }
            ],
            ethics: [
                { id: 9, text: "My actions reflect my core values.", dim: "ethics" },
                { id: 10, text: "I make decisions based on my core beliefs.", dim: "ethics" },
                { id: 11, text: "I resist pressures to do things contrary to my beliefs.", dim: "ethics" },
                { id: 12, text: "I am guided by internal moral standards rather than external pressures.", dim: "ethics" }
            ],
            balanced: [
                { id: 13, text: "I solicit views that challenge my deeply held positions.", dim: "balanced" },
                { id: 14, text: "I analyze relevant data before coming to a decision.", dim: "balanced" },
                { id: 15, text: "I listen carefully to different points of view before reaching conclusions.", dim: "balanced" },
                { id: 16, text: "I seek out perspectives that challenge my own.", dim: "balanced" }
            ]
        };

        const dimensionData = {
            selfAwareness: {
                name: "Self-Awareness",
                icon: "ü™û",
                color: "#1565C0",
                description: "Understanding your strengths, weaknesses, values, and how you impact others. Self-aware leaders seek feedback and reflect deeply on their behaviors and motivations.",
                highBehaviors: ["Regularly seeks feedback from others", "Understands personal strengths and limitations", "Aware of impact on others", "Reflects on own behavior and motivations"],
                development: ["Keep a leadership journal", "Seek 360-degree feedback", "Work with a coach or mentor", "Practice mindful self-reflection"]
            },
            transparency: {
                name: "Relational Transparency",
                icon: "üíé",
                color: "#2E7D32",
                description: "Presenting your authentic self to others. Being open, honest, and genuine in relationships rather than displaying a false front or hiding behind a professional mask.",
                highBehaviors: ["Says what they mean", "Admits mistakes openly", "Shares information freely", "Expresses genuine emotions appropriately"],
                development: ["Practice vulnerable communication", "Share your thought process with others", "Admit when you don't know something", "Be consistent across contexts"]
            },
            ethics: {
                name: "Internalized Moral Perspective",
                icon: "‚öñÔ∏è",
                color: "#7B1FA2",
                description: "Self-regulation guided by internal moral standards rather than external pressures. Making decisions based on deeply held values even when it's difficult.",
                highBehaviors: ["Actions align with stated values", "Resists pressure to compromise principles", "Makes ethical decisions consistently", "Guided by internal standards"],
                development: ["Clarify your core values", "Practice ethical decision-making", "Build moral courage", "Create accountability structures"]
            },
            balanced: {
                name: "Balanced Processing",
                icon: "üéØ",
                color: "#C62828",
                description: "Objectively analyzing relevant information before making decisions. Actively soliciting views that challenge your own positions and considering multiple perspectives.",
                highBehaviors: ["Seeks out challenging viewpoints", "Analyzes data objectively", "Listens to diverse perspectives", "Avoids confirmation bias"],
                development: ["Designate a devil's advocate", "Seek out disconfirming evidence", "Practice intellectual humility", "Delay decisions to gather more input"]
            }
        };

        const levels = [
            { min: 64, max: 80, name: "Highly Authentic Leader", desc: "You demonstrate strong authentic leadership across all dimensions. You lead with genuine self-awareness, transparency, values, and balanced judgment." },
            { min: 48, max: 63, name: "Authentic Leader", desc: "You show solid authentic leadership tendencies. Continue developing your self-awareness and commitment to leading genuinely." },
            { min: 32, max: 47, name: "Developing Authentic Leader", desc: "You're building authentic leadership capabilities. Focus on strengthening your lower dimensions for greater leadership impact." },
            { min: 16, max: 31, name: "Emerging Leader", desc: "Your authentic leadership is still developing. Invest in self-awareness and values clarification to build your authentic leadership foundation." }
        ];

        let responses = {};
        let studentName = '';
        let surveyDate = '';

        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('testDate').value = new Date().toISOString().split('T')[0];
        });

        function startAssessment() {
            studentName = document.getElementById('studentName').value.trim();
            surveyDate = document.getElementById('testDate').value;
            if (!studentName) { alert('Please enter your name.'); return; }
            if (!surveyDate) { alert('Please select a date.'); return; }
            document.getElementById('intro-section').classList.add('hidden');
            document.getElementById('assessment-section').classList.remove('hidden');
            renderQuestions();
        }

        function renderQuestions() {
            const container = document.getElementById('questions-container');
            let html = '';
            const allQuestions = [...questions.selfAwareness, ...questions.transparency, ...questions.ethics, ...questions.balanced].sort(() => Math.random() - 0.5);
            allQuestions.forEach((q, index) => {
                html += `
                    <div class="question-container" id="q-container-${q.id}">
                        <div class="question-text"><span class="question-number">${index + 1}.</span> ${q.text}</div>
                        <div class="likert-scale">
                            ${[1,2,3,4,5].map(val => `
                                <div class="likert-option">
                                    <input type="radio" name="q${q.id}" id="q${q.id}_${val}" value="${val}" onchange="handleResponse(${q.id}, ${val}, '${q.dim}')">
                                    <label for="q${q.id}_${val}">
                                        <span class="likert-number">${val}</span>
                                        <span class="likert-label">${['Not At All', 'Rarely', 'Sometimes', 'Often', 'Always'][val-1]}</span>
                                    </label>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            });
            container.innerHTML = html;
        }

        function handleResponse(questionId, value, dim) {
            responses[questionId] = { value, dim };
            document.getElementById(`q-container-${questionId}`).classList.add('answered');
            updateProgress();
        }

        function updateProgress() {
            const answered = Object.keys(responses).length;
            const progress = (answered / 16) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `${answered} of 16 questions completed`;
            document.getElementById('submitBtn').disabled = answered < 16;
        }

        function calculateResults() {
            if (Object.keys(responses).length < 16) { alert('Please answer all questions.'); return; }
            const scores = { selfAwareness: 0, transparency: 0, ethics: 0, balanced: 0 };
            Object.values(responses).forEach(r => { scores[r.dim] += r.value; });
            const totalScore = Object.values(scores).reduce((a, b) => a + b, 0);
            displayResults(scores, totalScore);
        }

        function displayResults(scores, totalScore) {
            const maxScore = 80;
            const maxDim = 20;
            const level = levels.find(l => totalScore >= l.min && totalScore <= l.max) || levels[3];
            const pct = (totalScore / maxScore) * 100;
            
            const sorted = Object.entries(scores).sort((a, b) => b[1] - a[1]);
            const highestDim = sorted[0][0];
            const lowestDim = sorted[3][0];

            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <div class="results-header">
                    <h2>üéØ Your Authentic Leadership Profile</h2>
                    <div class="student-name">${studentName}</div>
                    <div class="date">Completed: ${new Date(surveyDate).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</div>
                </div>

                <div class="overall-score">
                    <div class="score-circle" style="--pct: ${pct}%;">
                        <div class="score-inner">
                            <div class="score">${totalScore}</div>
                            <div class="label">of ${maxScore}</div>
                        </div>
                    </div>
                    <div class="level-name">${level.name}</div>
                    <div class="level-desc">${level.desc}</div>
                </div>

                <div class="dim-scores">
                    ${['selfAwareness', 'transparency', 'ethics', 'balanced'].map(dim => {
                        const data = dimensionData[dim];
                        const isHighest = dim === highestDim;
                        const isLowest = dim === lowestDim;
                        return `
                            <div class="dim-score-card ${isHighest ? 'highest' : ''} ${isLowest ? 'lowest' : ''}">
                                <div class="icon">${data.icon}</div>
                                <div class="name">${data.name}</div>
                                <div class="score">${scores[dim]}</div>
                                <div class="max">of ${maxDim}</div>
                            </div>
                        `;
                    }).join('')}
                </div>

                <div class="results-body">
                    <div class="result-section">
                        <h4>üìä Your Dimension Profile</h4>
                        ${['selfAwareness', 'transparency', 'ethics', 'balanced'].map(dim => {
                            const data = dimensionData[dim];
                            const dimPct = (scores[dim] / maxDim) * 100;
                            return `
                                <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 12px;">
                                    <span style="width: 160px; font-weight: 600; color: var(--text-secondary); font-size: 0.85em;">${data.icon} ${data.name}</span>
                                    <div style="flex: 1; height: 26px; background: #e8ecf0; border-radius: 13px; overflow: hidden;">
                                        <div style="height: 100%; width: ${dimPct}%; background: ${data.color}; border-radius: 13px; display: flex; align-items: center; justify-content: flex-end; padding-right: 10px; color: white; font-weight: 600; font-size: 0.8em; min-width: 35px;">${scores[dim]}</div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>

                    <div class="result-section gold-accent">
                        <h4>üí™ Your Strongest Dimension: ${dimensionData[highestDim].name}</h4>
                        <div class="dim-detail ${highestDim}">
                            <h5 style="color: ${dimensionData[highestDim].color};">${dimensionData[highestDim].icon} ${dimensionData[highestDim].name}</h5>
                            <p>${dimensionData[highestDim].description}</p>
                            <p><strong>High-${dimensionData[highestDim].name} Behaviors:</strong></p>
                            <ul>${dimensionData[highestDim].highBehaviors.map(b => `<li style="color: ${dimensionData[highestDim].color};">${b}</li>`).join('')}</ul>
                        </div>
                    </div>

                    <div class="result-section">
                        <h4>üéØ Growth Opportunity: ${dimensionData[lowestDim].name}</h4>
                        <div class="dim-detail ${lowestDim}">
                            <h5 style="color: ${dimensionData[lowestDim].color};">${dimensionData[lowestDim].icon} ${dimensionData[lowestDim].name}</h5>
                            <p>${dimensionData[lowestDim].description}</p>
                            <p><strong>Development Strategies:</strong></p>
                            <ul>${dimensionData[lowestDim].development.map(d => `<li style="color: ${dimensionData[lowestDim].color};">${d}</li>`).join('')}</ul>
                        </div>
                    </div>

                    <div class="reflection-section">
                        <h4>ü§î Reflection Questions</h4>
                        <div class="reflection-questions">
                            <div class="reflection-question">What values are most central to who you are as a leader?</div>
                            <div class="reflection-question">When have you been most authentic in your leadership? What made that possible?</div>
                            <div class="reflection-question">What situations make it difficult for you to be authentic?</div>
                            <div class="reflection-question">How do you currently seek feedback about your leadership impact?</div>
                            <div class="reflection-question">What would your team say about your authenticity as a leader?</div>
                            <div class="reflection-question">What one action could you take this week to lead more authentically?</div>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('assessment-section').classList.add('hidden');
            resultsDiv.style.display = 'block';
            document.getElementById('downloadSection').classList.remove('hidden');
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
            window.authResults = { scores, totalScore, level, highestDim, lowestDim };
        }

        function generatePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const { scores, totalScore, level, highestDim, lowestDim } = window.authResults;

            const chapmanBlue = [0, 32, 91];
            const chapmanGold = [196, 160, 0];
            const textDark = [26, 26, 46];
            const textMuted = [100, 100, 110];

            doc.setFillColor(...chapmanBlue);
            doc.rect(0, 0, 210, 45, 'F');
            doc.setFontSize(10);
            doc.setTextColor(255, 255, 255);
            doc.text('CHAPMAN UNIVERSITY', 105, 12, { align: 'center' });
            doc.setFontSize(9);
            doc.setTextColor(...chapmanGold);
            doc.text('Argyros College of Business and Economics', 105, 18, { align: 'center' });
            doc.setFontSize(18);
            doc.setTextColor(255, 255, 255);
            doc.text('Authentic Leadership Assessment', 105, 30, { align: 'center' });
            doc.setFontSize(10);
            doc.text("Based on Walumbwa et al.'s ALQ Model", 105, 38, { align: 'center' });
            doc.setFillColor(...chapmanGold);
            doc.rect(0, 45, 210, 2, 'F');

            let y = 55;
            doc.setFontSize(11);
            doc.setTextColor(...textDark);
            doc.text(`Student: ${studentName}`, 20, y);
            doc.text(`Date: ${new Date(surveyDate).toLocaleDateString()}`, 120, y);
            y += 12;

            doc.setFillColor(...chapmanBlue);
            doc.roundedRect(20, y, 170, 20, 3, 3, 'F');
            doc.setFontSize(14);
            doc.setTextColor(255, 255, 255);
            doc.text(`${level.name}: ${totalScore}/80`, 105, y + 13, { align: 'center' });
            y += 28;

            doc.setFontSize(10);
            doc.setTextColor(...textDark);
            ['selfAwareness', 'transparency', 'ethics', 'balanced'].forEach(dim => {
                doc.text(`${dimensionData[dim].icon} ${dimensionData[dim].name}: ${scores[dim]}/20`, 25, y);
                y += 6;
            });
            y += 10;

            doc.setFontSize(11);
            doc.setTextColor(...chapmanBlue);
            doc.text(`Strongest: ${dimensionData[highestDim].name}`, 20, y);
            y += 6;
            doc.text(`Growth Area: ${dimensionData[lowestDim].name}`, 20, y);
            y += 12;

            doc.setFillColor(...chapmanBlue);
            doc.roundedRect(20, y, 170, 10, 2, 2, 'F');
            doc.setFontSize(10);
            doc.setTextColor(255, 255, 255);
            doc.text('REFLECTION QUESTIONS', 105, y + 7, { align: 'center' });
            y += 18;

            const reflectionQs = ['What values are most central to who you are as a leader?', 'When have you been most authentic? What made that possible?', 'What situations make it difficult to be authentic?', 'What one action could you take this week to lead more authentically?'];
            doc.setFontSize(9);
            doc.setTextColor(...textDark);
            reflectionQs.forEach((q, i) => {
                const lines = doc.splitTextToSize(`${i + 1}. ${q}`, 165);
                lines.forEach(line => { doc.text(line, 25, y); y += 5; });
                y += 4;
            });

            doc.setFontSize(8);
            doc.setTextColor(...textMuted);
            doc.text('Page 1 of 1', 105, 287, { align: 'center' });
            doc.text('Chapman University ‚Ä¢ Argyros College of Business and Economics ‚Ä¢ MGMT 316', 105, 292, { align: 'center' });

            doc.save(`Authentic_Leadership_Assessment_${studentName.replace(/\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.pdf`);
        }

        function restartAssessment() {
            responses = {};
            document.getElementById('studentName').value = '';
            document.getElementById('testDate').value = new Date().toISOString().split('T')[0];
            document.getElementById('results').style.display = 'none';
            document.getElementById('assessment-section').classList.add('hidden');
            document.getElementById('downloadSection').classList.add('hidden');
            document.getElementById('intro-section').classList.remove('hidden');
            document.getElementById('progressFill').style.width = '0%';
            window.scrollTo(0, 0);
        }
    </script>
</body>
</html>
